<!DOCTYPE html>
<html  lang="ro">
    <head>
<head>
    <title>Mobline</title>

    <meta name="keywords" content="mobline,mob-line,magazin,online,mobila,amenajare,decor,decorațiuni,electrocasnice">
    <meta name="description"
        content="Magazin online de mobilă ce prezintă o gamă de piese de mobilier, electrocasnice și decorațiuni">

    <%- include("../fragmente/head.ejs") %>
    <link rel="stylesheet" href="/resurse/css/produse.css" type="text/css" /> 
    <script type="text/javascript" src=/resurse/js/produse.js></script>
</head>
    <body>
    <%- include("../fragmente/header") %>

    <main>
        <label> Nume: <input type="text" id="inp-nume"></label>

        <div id="radio-buttons"> Categorii: <br><!-- trebuie sa aiba acelasi name ca sa formeze un grup -->
            <% 
                let i=1;
                for (let opt of locals.optiuni) { %>
                    <input  id="<%- "i_rad" + i -%>" name="gr_rad" value="<%- opt.unnest -%>" type="radio"/>
                    <label> <%- opt.unnest.charAt(0).toUpperCase() + opt.unnest.slice(1) -%> </label><br>
            <% i++;
            } %>
            <p>
            <input id="i_rad10" checked name="gr_rad" value="toate" type="radio" />
            <label>Toate</label>
        </div>

        <label>Textarea:
            <textarea id="i_textare" rows="1" cols="25"></textarea>
        </label><br>

        <label> Pret minim: <span class="range-min">0 </span>
        <input type="range" id="inp-pret" value="0" min="0" max="3900" step="100">
        <span class="range-max">3900</span><span id="infoRange">(0)</span></label>
       
        <label>Select simplu:
            <select id="inp-disponibilitate">
                <option id="sel-toate" selected value="toate">toate</option>
                <option value = "true">disponibil</option>
                <option value="false">indisponibil</option>
            </select>
        </label>
        
        <label>Noutăți:
            <input id="i_check" name="gr_chck" value="2023-06-04 17:20:17.493478" type="checkbox" />
        </label><br>

        <% 
        var materiale=[]; 
        for(let prod of locals.produse) { 
            for(let i=0; i < prod.materiale.length ; i++) { 
                var ok = 1;
                for(let j = 0; j< materiale.length; j++){
                    if(materiale[j].startsWith(prod.materiale[i])){
                        ok=0; break;
                    }
                }
                if(ok){
                    materiale.push(prod.materiale[i]);
                }
            }
        }
        console.log(materiale);
        %>

        <label>Select multiplu:
            <select id="inp-materiale" multiple size = "<% materiale.length %>">
                <% for (let opt of materiale) { %>
                    <option value="<%- opt %>"><%- opt %> </option>
                <% } %>
            </select>
        </label>

        <p>
        <button id="filtrare">Filtreaza</button> 
        <button id="resetare">Reseteaza</button><br>
        <span id="mesaj-resetare" style = "display:none;">Doriti resetarea filtrelor?<button id="buton-resetare-da">DA</button><button id="buton-resetare-nu">NU</button></span>
        <button id="sortCrescNume">Sorteaza crescator dupa pret si nume</button>
        <button id="sortDescrescNume">Sorteaza descrescator dupa pret si nume</button>
        </p>
        
        <p id="p-suma">Apăsați Alt+"c" pentru suma preturilor produselor afișate. </p>
        
        <section id="produse">
            <h2>Produse</h2>
            <div class="grid-produse">
                <% for( let prod of locals.produse) { %>
                    <article id = "<%- "artc-"+ prod.id -%>"class="produs" >
                        <div id="stanga">
                            <h3 class="nume">Nume: <a href="/produs/<%-prod.id %>" ><span class="val-nume"><%- prod.nume%></span></a></h3>
                            <div style = "display: block;" class="info-prod">
                                <figure>
                                    <a href="/produs/<%-prod.id %>"><img src="/resurse/imagini/produse/<%- prod.imagine %>"
                                            style="width:50%;height:auto;" alt="[imagine <%- prod.nume %>]" /></a>
                                </figure><br>
                                <p style="display:none;" class="id"><%- prod.id%></p><br>
                                <p class="pret">Pret: <span class="val-pret"><%- prod.pret%></span></p><br>
                                
                                <p class="materiale">Materiale: <span class="val-materiale"><%- prod.materiale%></span></p><br>
                                <p class="disponibilitate">Disponibilitate: <span class="val-disponibilitate"><%- prod.disponibilitate%></span></p><br>
                                <p class="data">Data adaugare: <span class="val-data" ><%- prod.data_adaugare %></span></p><br>
                            </div>
                        </div>
                        <div id="dreapta">
                            <p class="categorie">Categorie:<span class="val-categorie"><%- prod.categorie%></span></p><br>
                            <p class="descriere">Descriere: <span class="val-descriere"><%- prod.descriere%></span></p><br>
                        </div>
                        <label style = "display: none;" class="selecteaza-cos">
                            Selectează:<br/>
                            <input type="checkbox" class="select-cos" value="<%-prod.id %>" autocomplete="off">
                        </label>
        
                    </article>
                <% }%>
            </div>
        </section>
    </main>

    <%- include("../fragmente/footer") %>
    </body>
</html>